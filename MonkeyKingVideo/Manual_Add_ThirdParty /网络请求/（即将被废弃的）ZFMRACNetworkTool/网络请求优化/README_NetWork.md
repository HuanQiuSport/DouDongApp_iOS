#  优化网络请求结构(针对下面的7点进行优化）




## 问题所在

### 1.原网络访问集成于VC中
弊端：
1.要想网络请求必须要要有控制器,部分在UIView中业务想做网络请求时，需要回到vc中，网络请求操作完再把数据返回view业务中
2.同样的网络请求要重复写很多便，复用性较差
有点:  可以直接在VC调用

### 2.原网络访问依赖于RAC，
但是RAC又是一个比较大的库，总共有13个分支之多，本来网络请求就是基于AFNetworking的二次封装，若是在嵌入一个大的三方库，那么问题就会更多

### 3.原网络请求没有正在加载中视图提示

### 4.原网络请求没有取消当前请求操作

### 5.原网络请求对于大文件的，上传，下载上没有限制，没有作处理，

### 6.请求数据的交互局限于json，不利于其他的第三方的介入，例如xml,data 等数据请求交互并没有很好的支持，或者是很好的区分

### 7.返回数据的处理上，有些问题，有些需要拦截，有些不需要拦截，没有做区分，
通常，这样处理没有毛病，但是在实际的业务交互上，很明显的暴露出来了


## 优化方针和步骤

### 1.先从控制器分离 （完成）

### 2.增加正在加载中的视图 （可选）

### 3.返回数据的处理（可选）

### 4.交互数据扩展（可选）

### 5.可撤销请求操作（可选）

### 6.断点续传，断点下载

### 7.去掉对于RAC的依赖，
（鉴于web开发上，由于框架的滥用以及框架分支的原因，致使大型项目后期维护特别的困难，甚至有些项目没有办法维护，所以iOS这边我采用的方式是，插件功能单一化，影响最小化，形同一个插排，一个插孔坏了，其他的插孔还可以用，我只需要维修坏的就可以，其他只需要检测就好）
